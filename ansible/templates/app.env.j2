# {{ ansible_managed }}
# Application Environment Configuration
# Generated for: {{ environment }} environment

# Application
APP_NAME={{ app_name }}
APP_VERSION={{ app_version }}
ENVIRONMENT={{ environment }}
DEBUG={{ enable_debug | default(false) | lower }}

# API Configuration
API_HOST=0.0.0.0
API_PORT={{ app_port }}
API_WORKERS={{ workers }}

# Security
SECRET_KEY={{ vault_secret_key }}
{% if environment == 'production' %}
ALLOWED_ORIGINS={{ allowed_origins | default('https://app.example.com') }}
{% else %}
ALLOWED_ORIGINS=*
{% endif %}

# Database
DATABASE_URL=postgresql://{{ db_user }}:{{ vault_db_password }}@{{ database_host }}:5432/{{ db_name }}
DATABASE_POOL_SIZE={{ db_pool_size | default(20) }}

# Redis
REDIS_URL=redis://:{{ vault_redis_password }}@{{ redis_host }}:6379/0

# Logging
LOG_LEVEL={{ log_level | default('INFO') }}

# External Services
{% if sentry_dsn is defined %}
SENTRY_DSN={{ sentry_dsn }}
{% endif %}

{% if aws_access_key_id is defined %}
AWS_ACCESS_KEY_ID={{ aws_access_key_id }}
AWS_SECRET_ACCESS_KEY={{ vault_aws_secret_key }}
AWS_REGION={{ aws_region | default('us-east-1') }}
{% endif %}

# Feature Flags
ENABLE_METRICS={{ enable_monitoring | default(true) | lower }}
ENABLE_RATE_LIMITING={{ enable_rate_limiting | default(true) | lower }}